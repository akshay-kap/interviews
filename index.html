<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <title>Hello, Holocene</title>
    <style>
      html {
        font-size: 16px;
        font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;
      }

      body {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-flow: wrap;
        min-width: 30rem;
      }

      th, td {
        text-align: right;
      }

      /* Copied from <https://jgthms.com/wysiwyg.css/>
       * No need to include the whole stylesheet, when we only care about table styles for now
       */
      th, td { font-size: 1em; padding: .7em; border: 1px solid #e6e6e6; line-height: 1.4 }
      thead tr { background-color: #f5f5f5 }
      thead th, thead td { font-size: .9em; padding: .77778em }
      tbody tr { background-color: #fff }
    </style>
    <script crossorigin src="https://unpkg.com/@nteract/plotly"></script>
  </head>
  <body class="wysiwyg">
    <table><thead><tr></tr></thead><tbody></tbody></table>
    <figure id="chart"></figure>
    <script>
      const data = [
        { "a": 1, "b": 3, "c": 10 },
        { "a": 3, "b": 20, "c": 12 },
        { "a": -1, "b": -5, "c": -4 },
      ];

      const headerRow = document.querySelector("thead tr");
      for (const header of Object.keys(data[0])) {
        const th = document.createElement("th");
        th.innerText = header;
        headerRow.appendChild(th);
      }

      const tbody = document.querySelector("tbody");
      for (const row of data) {
        const tr = document.createElement("tr");
        for (const value of Object.values(row)) {
          const td = document.createElement("td");
          td.innerText = value;
          tr.appendChild(td);
        }
        tbody.appendChild(tr);
      }

      const xAxis = "a";
      const sorted = Array.from(data);
      sorted.sort((first, second) => first[xAxis] - second[xAxis]);

      const traces = [];
      for (const yAxis of Object.keys(sorted[0])) {
        if (yAxis === xAxis) continue;
        const trace = { type: "scatter", x: [], y: [], name: yAxis };
        for (const point of sorted) {
          trace.x.push(point[xAxis]);
          trace.y.push(point[yAxis]);
        }
        traces.push(trace);
      }
      const layout = { legend: { x: 0, y: 1.15 } };
      Plotly.newPlot("chart", traces, layout, { responsive: true });
    </script>
  </body>
</html>
